{% extends 'main.html' %} {% block content %}

<div class="section">
  <div class="container">
    <div class="row full-height justify-content-center">
      <body>
        <div id="stars"></div>
        <div id="stars2"></div>
        <div id="stars3"></div>
        <div class="section">
          <div class="container">
            <div class="row full-height justify-content-center">
              <div class="col-12 text-center align-self-center py-5">
                <div class="section pb-5 pt-5 pt-sm-2 text-center">
                  <h6 class="mb-0 pb-3">
                    <span>Autentificare </span><span>Înregistrare</span>
                  </h6>
                  <input
                    class="checkbox"
                    type="checkbox"
                    id="reg-log"
                    name="reg-log"
                  />
                  <label for="reg-log"></label>
                  <div class="card-3d-wrap mx-auto">
                    <div class="card-3d-wrapper">
                      <div class="card-front">
                        <div class="center-wrap">
                          <div class="section text-center">
                            <h4 class="mb-4 pb-3">Autentificare</h4>
                            <form
                              method="POST"
                              action="{% url 'login_register' %}"
                            >
                              {% csrf_token %}
                              <input
                                type="hidden"
                                name="form_type"
                                value="login"
                              />
                              <div class="form-group">
                                <input
                                  type="text"
                                  name="username"
                                  class="form-style"
                                  placeholder="Nume utilizator"
                                />
                                <i class="input-icon uil uil-user"></i>
                              </div>
                              <div class="form-group mt-2">
                                <input
                                  type="password"
                                  name="password"
                                  class="form-style"
                                  placeholder="Parolă"
                                />
                                <i class="input-icon uil uil-lock-alt"></i>
                              </div>
                              <button
                                type="submit"
                                name="submit"
                                value="sign_in"
                                class="btn mt-4"
                              >
                                Autentificare
                              </button>
                            </form>
                            {% if messages %}
                            <ul class="messages">
                              {% for message in messages %}
                              <li>{{ message }}</li>
                              {% endfor %}
                            </ul>
                            {% endif %}
                            <p class="mb-0 mt-4 text-center">
                              <a
                                href="https://www.web-leb.com/code"
                                class="link"
                                >Ai uitat parola?</a
                              >
                            </p>
                          </div>
                        </div>
                      </div>

                      <div class="card-back">
                        <div class="center-wrap">
                          <div class="section text-center">
                            <h4 class="mb-3 pb-3">Înregistrare</h4>

                            <form
                              method="POST"
                              action="{% url 'login_register' %}"
                            >
                              {% csrf_token %}
                              <input
                                type="hidden"
                                name="form_type"
                                value="register"
                              />
                              {% if form.non_field_errors %}
                              <div class="errors">
                                {% for error in form.non_field_errors %}
                                <p>{{ error }}</p>
                                {% endfor %}
                              </div>
                              {% endif %}

                              <!-- Renderizează manual câmpul de utilizator -->
                              <div class="form-group mt-2">
                                <input
                                  type="text"
                                  name="{{ form.username.name }}"
                                  class="form-style"
                                  placeholder="Nume complet"
                                  value="{{ form.username.value|default_if_none:'' }}"
                                />
                                <i class="input-icon uil uil-user"></i>
                                {% if form.username.errors %}
                                <div class="errors">
                                  {% for error in form.username.errors %}
                                  <p>{{ error }}</p>
                                  {% endfor %}
                                </div>
                                {% endif %}
                              </div>

                              <!-- Manually render the password field -->
                              <div class="form-group mt-2">
                                <input
                                  type="password"
                                  name="{{ form.password1.name }}"
                                  class="form-style"
                                  placeholder="Parolă"
                                />
                                <i class="input-icon uil uil-lock-alt"></i>
                                {% if form.password1.errors %}
                                <div class="errors">
                                  {% for error in form.password1.errors %}
                                  <p>{{ error }}</p>
                                  {% endfor %}
                                </div>
                                {% endif %}
                              </div>

                              <!-- Manually render the password confirmation field -->
                              <div class="form-group mt-2">
                                <input
                                  type="password"
                                  name="{{ form.password2.name }}"
                                  class="form-style"
                                  placeholder="Confirmare parolă"
                                />
                                <i class="input-icon uil uil-lock-alt"></i>
                                {% if form.password2.errors %}
                                <div class="errors">
                                  {% for error in form.password2.errors %}
                                  <p>{{ error }}</p>
                                  {% endfor %}
                                </div>
                                {% endif %}
                              </div>

                              <button
                                type="submit"
                                value="sign_up"
                                class="btn mt-4"
                              >
                                Înregistrare
                              </button>
                            </form>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </body>
    </div>
  </div>
</div>

{% endblock content %}
